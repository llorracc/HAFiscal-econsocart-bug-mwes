% Minimal Working Example: Garbled Headers in Draft Mode
% Bug: Odd-page headers show BOTH journal name and title (concatenated)
% Root cause: econsocart.cls line 1953-1956 treats QE incorrectly
% Date: November 4, 2025

\documentclass[qe,draft]{econsocart}

\usepackage{natbib}

\begin{document}

\begin{frontmatter}
  \title{Minimal Working Example}
  \runtitle{Minimal Working Example}
  
  \begin{aug}
    \author[add1]{\fnms{Christopher}~\snm{Carroll}\ead[label=e1]{ccarroll@jhu.edu}}
    \address[add1]{\orgname{Johns Hopkins University}}
  \end{aug}
  
  \begin{abstract}
    This minimal example demonstrates a header formatting bug in 
    \texttt{econsocart.cls} where Quantitative Economics (QE) submissions 
    in draft mode display garbled headers on odd pages.
  \end{abstract}
\end{frontmatter}

\section{Reproducing the Bug}

Compile this document with:
\begin{verbatim}
pdflatex mwe-headers-draft.tex
\end{verbatim}

Then examine the header on page 2 (an odd page).

\subsection{Expected Behavior}

For QE submissions, odd-page headers (right side) should show:
\begin{center}
  \fbox{\texttt{[Paper Title] \hspace{2cm} [Page Number]}}
\end{center}

\subsection{Actual Behavior (Bug)}

Instead, odd-page headers show:
\begin{center}
  \fbox{\texttt{Submitted to Quantitative EconomicsMinimal Working Example1}}
\end{center}

The journal name and title are concatenated without spacing, creating 
garbled, unreadable text.

\section{Root Cause Analysis}

\subsection{Location in Source Code}

File: \texttt{econsocart.cls}, lines 1953--1956

\begin{verbatim}
\ifecta@layout
    \markboth{{\let\.\econsocart@redef@uc@dot\@runauthor}}{\@runtitle}%
\else
    \markboth{\@runauthor\hfill\@runjournal}{\@runjournal\hfill\@runtitle}%
\fi
\end{verbatim}

\subsection{The Problem}

\begin{enumerate}
\item QE submissions use \verb|\documentclass[qe]{econsocart}|
\item This sets \verb|\qe@layouttrue| but \textbf{not} \verb|\ecta@layouttrue|
\item Conditional falls into \verb|\else| branch (intended for other journals)
\item The \verb|\else| branch sets: \verb|\rightmark = \@runjournal\hfill\@runtitle|
\item Both journal name \textbf{and} title appear in odd-page header
\end{enumerate}

\subsection{Why This Is Wrong}

QE submissions should behave like ECTA (Econometrica) submissions:

\begin{center}
\begin{tabular}{lll}
\hline
\textbf{Page Type} & \textbf{Should Show} & \textbf{Actually Shows} \\
\hline
Even (left) & Journal name & Journal name ✓ \\
Odd (right) & Paper title only & Journal name + Title ✗ \\
\hline
\end{tabular}
\end{center}

\newpage
\section{Demonstration on Page 2}

This section forces content onto page 2 so you can observe the garbled 
header in the compiled PDF.

Look at the top-right corner of this page. You should see both the 
journal name and the paper title crammed together.

\subsection{Additional Context}

The bug affects readability and professionalism of draft submissions. 
While reviewers can still read the document, the garbled headers look 
unprofessional and may cause confusion.

\subsection{Impact}

\begin{itemize}
\item \textbf{Severity}: Major visual defect
\item \textbf{Scope}: All QE submissions in draft mode
\item \textbf{Workaround}: Required for acceptable output
\end{itemize}

\section{Suggested Fix}

Modify \texttt{econsocart.cls} lines 1953--1956 to handle QE like ECTA:

\begin{verbatim}
\ifecta@layout
    \markboth{{\let\.\econsocart@redef@uc@dot\@runauthor}}{\@runtitle}%
\else
    \ifqe@layout
        % QE should behave like ECTA for headers
        \markboth{{\let\.\econsocart@redef@uc@dot\@runauthor}}{\@runtitle}%
    \else
        % Other journals show journal name + title
        \markboth{\@runauthor\hfill\@runjournal}%
                 {\@runjournal\hfill\@runtitle}%
    \fi
\fi
\end{verbatim}

This would correctly set:
\begin{itemize}
\item \verb|\leftmark = \@runauthor| (authors, for even pages)
\item \verb|\rightmark = \@runtitle| (title only, for odd pages)
\end{itemize}

\section{Temporary Workaround}

Until the class file is fixed, users can directly redefine headers 
after \verb|\end{frontmatter}|. See \texttt{workaround.sty} for 
a complete implementation.

\end{document}

